<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:lc="http://xmlns.jcp.org/jsf/composite/libcomp">
    <h:head>
        <title>#{bundle.Iteration} ##{myBeanJSF.iter}</title>
        <h:outputStylesheet library="css" name="default.css"/>
    </h:head>
    <h:body>
        <h:form id="form1" onkeypress="return event.keyCode !== 13;">
            <!-- Hide the backend bean property for javascript purposes -->
            <h:inputHidden id="bound" value="#{myBeanJSF.bound}"/>

            <h:panelGrid columns="2" columnClasses="column-left, column-right">
                <h:panelGroup layout="block">
                    <h:outputText value="#{bundle.Welcome} : #{myBeanJSF.sn}"/>
                    <p/>
                    <h:outputText id="iter" value="#{bundle.Iteration} : ##{myBeanJSF.iter}"/>
                </h:panelGroup>
                <h:outputText id="counter" styleClass="counter" value="00"/>
            </h:panelGrid>

            <p/>
            <!-- Default HTML5 progressbar 
            <progress jsf:id="progressbar" value="#{myBeanJSF.iter}" max="#{myBeanJSF.bound}" style="width: #{myBeanJSF.incr}%"/>
            -->
            <h:panelGroup layout="block" id="progress">
                <lc:progressbar id="pbar1" value="#{myBeanJSF.incr}" max="#{myBeanJSF.bound}"/>
                <p/>
                <lc:progressbar id="pbar2" value="#{myBeanJSF.incr/2}" max="#{myBeanJSF.bound}" color="purple"/>
                <p/>
                <lc:progressbar id="pbar3" value="#{myBeanJSF.incr-10}" max="#{myBeanJSF.bound}" color="yellow"/>
            </h:panelGroup>
            <p/>
            <h:outputLabel value="#{bundle.IncrValue} : " for="incr"/>
            <h:inputText id="incr" value="#{myBeanJSF.incr}" label="#{bundle.IncrValue}" p:autocomplete="off" required="true">
                <f:ajax event="change" render="iter increrrormsg incrset text progress" listener="#{myBeanJSF.add}"/>
            </h:inputText>
            <h:message for="incr" id="increrrormsg" showDetail="true" style="color: red"/>
            <p/>
            <h:outputText id="incrset" value="#{bundle.IncrValue} = #{myBeanJSF.incr}"/>
            <p/>
            <h:outputLabel value="#{bundle.EnterDate} : " for="date" />
            <input type="date" jsf:id="date" name="date" jsf:title="#{bundle.EnterDate}" jsf:value="#{myBeanJSF.date}" jsf:label="date" placeholder="#{bundle.DateLabel}" autocomplete="off" required="required">
                <f:convertDateTime pattern="yyyy-MM-dd" />
                <f:ajax event="change" render="fulldate datemessage" listener="#{myBeanJSF.showFullDateMessage}"/>
            </input>
            <h:message for="date" id="datemessage" showDetail="true" style="color: red"/>
            <p/>
            <h:outputText id="fulldate" rendered="true" binding="#{myBeanJSF.fulldate}"/>
            <p/>
            <h:outputText id="text" binding="#{myBeanJSF.text}" styleClass="outofbound"
                          rendered="true" />
            <p/>
            <h:commandLink action="#{myBeanJSF.back}" >
                <h:outputText value="index.html"/>
                <!--
                If the user change the "incr" or "date" value and click on this link, 
                validation is automatically performed by this action.
                "increrrormsg" and "datemessage" must also be rendered otherwise, 
                at the very first time, if the user clicks on this link without having changed "date",
                no error message will be displayed.
                Avoid to use @form for render or execute, otherwise, 
                you should expect ajax and full requests conflicts and issues regarding 
                the data integrity.
                -->
                <f:ajax execute="incr date" render="increrrormsg datemessage"/>
            </h:commandLink>
            <h:commandButton action="#{myBeanJSF.reset}" value="#{bundle.Reset}">
                <f:ajax render="@form"/>
            </h:commandButton>
        </h:form>
        <h:outputScript library="js" name="random_incr.js"/>
    </h:body>
</html>

